---
title: All Scripts
createdAt: Wed Dec 10 2025 07:42:00 GMT+0000 (Coordinated Universal Time)
updatedAt: Wed Dec 10 2025 07:42:28 GMT+0000 (Coordinated Universal Time)
---

**対象：**macOSデバイス

****では、システム管理者の役割を持つユーザが、[管理] > [スクリプトとファイル] > [すべてのスクリプト] ページから、構成で使用およびデバイスに配布が可能なスクリプトの作成、アップロード、および管理を行えます。カスタム属性をスクリプトに関連付け、結果の値を構成済みのデバイスに割り当てることも可能です。 スクリプト変更のログと実行結果を見るには、監査証跡を使用します。

スクリプトの記述により、デバイスの任意の設定を構成することができます。 たとえば以下のようなスクリプトも実行できます。
- デバイスユーザに月1回のパスワード変更を強制する。
- アイドル時間が5分になると画面をロックする。
- セキュリティ付きのWi-Fiネットワークを設定する。


このセクションは以下のトピックを含みます。
- スクリプトの追加
- スクリプトの変更
- スクリプト変数の使用
- スクリプトのテスト
- スクリプト実行結果の確認


## [****](#)スクリプトの追加

bashスクリプトのリポジトリを作成またはアップロードできます。 ****Mobile@Work for macOS Scriptなど、このリポジトリを構成に使用すれば、スクリプトを選択してデバイスに配布し、構成内に指定したスケジュールに応じて実行させることが可能です。

たとえば、シェルスクリプトを作成してデバイス上で実行させます。 必要であれば、ラッパーも使用可能です。 シェルスクリプト内からのバイナリファイル実行はサポートされません。

Ivantiは、シェルスクリプトをデバイスで実行する前にテストし、安定性やクオリティを確認することを強く推奨します。 ローカルでスクリプトを実行し、エラーが発生すれば修正してください。 

手順

1. **[管理] > [スクリプト] > [すべてのスクリプト]** を開きます。
2. **[+追加]** をクリックします。
3. スクリプトの名前と説明を入力します。
4. 次の**スクリプトタイプ**から1つを選択します。 
   - **bash**
   - **zsh**
   - **python**
   - **swift**

5. **[ルートとして実行]** チェックボックスを選択し、デバイス上でスクリプトをルートとして実行します。 デフォルトではオフです。
6. **スクリプトエディタ**では、スクリプトをテキストボックスに入力、ドラッグ＆ドロップ、コピー＆ペーストできます。
7. ****[スクリプトからコードをインポート] をクリックして既存のスクリプトファイルをドラッグ＆ドロップするか、[ファイルを選択] をクリックしてブラウズし、にアップロードするスクリプトファイルを選択してもかまいません。 これにより、スクリプトエディタ内の既存のスクリプトが上書きされます。 このアクションは元に戻せません。 **[インポート]** をクリックします。 アップロードしたスクリプトのコードがエディタに表示されます。
8. （任意）**[利用可能なカスタム属性]** セクションで、表示されている1つ以上のデバイスカスタム属性を選び、スクリプトに関連付けます。 これは、スクリプト実行結果の値を構成済みデバイスのデバイスカスタム属性に割り当てるために使用されます。 スクリプト内のカスタム属性を使用したサンプルコードを見るには、**[カスタム属性用のサンプルコード]** をクリックしてください。
9. **[保存]** をクリックします。


スクリプト内のカスタム属性名は必ず小文字です。 スクリプト内でカスタム属性が参照されている場合、その属性は削除できません。 カスタム属性（名前など）を変更し、それがスクリプトに関連付けられている場合は、そのスクリプトにも対応の変更を加える必要があります。

## [****](#)スクリプトの変更

スクリプトを編集または削除するには：

1. **[管理] > [スクリプト] > [すべてのスクリプト]** を開きます。
2. スクリプトの **[アクション]** 列で、編集または削除に対応するアイコンをクリックします。
3. 画面上の指示に従い、アクションを完了させます。


スクリプト（内容、名前、説明）が変更された場合、スクリプトに関連付けられたすべての構成がデバイスに再配布されます。

## [****](#)スクリプト変数の使用

環境変数や置換変数などのスクリプト入力を定義し、スクリプトリポジトリに保存します。 macOS対応Mobile@Workスクリプト構成では、どのスクリプトがリンクされているかにより、必要に応じて関連スクリプト変数が使えるようになります。 ****この機能には、macOS対応Mobile@Work 1.71.0以降、がサポートする最新リリース版までが必要です。

変数を使用してスクリプトを実行し、実行のたびに異なる値を使用してください。 たとえば管理者は、${userEmailAddress}環境変数をスクリプト変数として使用するスクリプトを作成し、macOS対応Mobile@Workスクリプト構成と関連付けることができます。 構成が配布され、各ユーザデバイスにインストールされた後、が異なる登録済みユーザメールアドレスを各デバイスに送信し、所定のアクションを実行させます。  管理者ポータルでは、カスタム変数がサポートされます。

スクリプト変数を追加するには：

1. **[管理] > [スクリプト] > [すべてのスクリプト]** を開きます。
2. [スクリプト入力] セクションで **[+追加]** をクリックします。
3. [スクリプト入力を追加 - 環境変数] ポップアップページで以下の情報を入力します。
   - 表示するラベル - このテキストは、macOS対応Mobile@Workスクリプト構成ページのラベルとして表示されます。 「OSフォルダーを入力」、「Apache番号を入力」など。
   - 環境変数名 - JAVA_HOME、OS_VERSIONなど。  は、構成の詳細を対象デバイスに送信すると同時に、データベース内で持続的に使用されるスクリプト変数の値を置換します。
   - 環境変数のデフォルト値 - 1024、bin/java、${PhoneNumber}など。 入力変数は、管理者によってアップロードまたは編集されたスクリプトに使用されます。 以下の注もお読みください。

4. [プレビュー領域] では、環境変数が構成ページにおいてスクリプト入力としてどのように表示されるかを確認できます。
5. **[保存]** をクリックします。


 これにより、環境変数ではなく、ラベルとデフォルト値だけが構成に公開され、抽象化の層ができます。
- 英数字（1024、bin/java、root@localhostなど）やシステム属性（${userFirstName}）は環境変数の値として使用できます。
- 環境変数の値は導入中に構成ページで変更や削除が可能です。
- 環境変数の値を提供していない場合は、スクリプト導入中に必ず提供するようにしてください。 さもなければ、空値がスクリプトに渡されます。 
- スクリプト構成がデバイスに配布され、インストールされた後は、[管理] > [スクリプトとファイル] > [すべてのスクリプト] ページで環境変数を編集しても、スクリプトと関連する既存の構成に影響はありません。 [**Mobile@Work for macOS スクリプト構成**](\<./Mobile@Work for macOS.md>) も参照してください。


### スクリプト変数の編集

スクリプト変数を変更するには、変数の編集（鉛筆）アイコンをクリックし、変更を保存してください。 

スクリプト構成がスクリプト変数を持つスクリプトを参照している場合、既存のスクリプト変数のラベルを編集するとスクリプト構成にも反映されます。 ただし、以下の点に注意してください。
- スクリプト変数のデフォルト値を変更しても既存の構成には反映されません。 
- スクリプト変数のデフォルト値の変更は、前のスクリプトを使って作成した新しい構成にのみ反映されます。


### スクリプト変数の削除

スクリプト変数を削除するには、変数の削除（マイナス）アイコンをクリックし、確定してください。 

新しく作成したスクリプト変数、あるいは既存のスクリプト変数の削除は、既存の構成の中でも反映されます。

## [****](#)スクリプトのテスト

デバイス上でテストする前に、デバッグツールで簡単にスクリプトをテスト実行してください。必ずしもスクリプトを保存する必要はありません。 ****この機能には、macOS対応Mobile@Work 1.67以降、がサポートする最新リリース版までが必要です。

手順

1. **[管理] > [スクリプト] > [すべてのスクリプト]** を開きます。
2. スクリプトエディタでスクリプトを追加またはインポートします。
3. テナントに複数のスペースがある場合はスペースを選択します。
4. テストスクリプトのセクションでプラットフォームに **[macOS]** を選択します。
5. **[デバイスの検索]** テキストフィールドで、スクリプトをテストするデバイスを検索し、選択します。 デバイスは、シリアル番号、ユーザ名、デバイス名、OSバージョンで検索できます。
6. **[今すぐテスト]** をクリックします。 これにより環境変数を追加、編集、削除し、その状態のスクリプト（変更を保存しなくても）をテストできます。
7. スクリプトがデバイスにプッシュされ、実行されるのを待ちます。
8. スクリプト入力（環境変数の詳細を含む）、スクリプト出力、カスタム属性セクションで発行されたテスト結果を確認します。 環境変数のデフォルト値も表示されます。


## [****](#)スクリプト実行結果の確認

スクリプト実行結果のログを表示するには：

1. **[デバイス]** を開きます。
2.  デバイスの名前をクリックします。 
3. **[ログ]** タブをクリックします。
4. スクリプト実行アクションを表示する行では、以下の情報を確認できます。
   - 詳細列でスクリプト名
   - ステータス列のスクリプト実行ステータス
   - 日付列のスクリプト実行の日時
   - アクション列の下の目のアイコンをクリックすると、スクリプト実行ログ (デバイス ログ plist) が表示されます。

5. フィルターを使用して **[スクリプト実行]** 行を表示します。 これらの行のログには、標準出力の出力（plist）とスクリプトの標準エラーが含まれます。
6. フィルターを使用して **[スクリプト実行結果処理中]** の行を表示します。 これらの行のログには、結果の処理方法に関する詳細（plist）が含まれます。
   - スクリプトに関連付けられたカスタム属性がない場合は、処理する結果がありません。 そのようなスクリプトはフィルター済みの行のリストに表示されません。
   - スクリプトにカスタム属性が関連付けられていて、それらが然るべき形式であれば、結果のカスタム属性がマッピングされてステータスが成功と表示されます。 マッピング済みのカスタム属性とその値は、**[属性]** タブで確認できます。
   - スクリプトにカスタム属性が関連付けられていて、それらが期待どおりの形式でない場合、結果のカスタム属性はマッピングされず、ステータスはエラーと表示されます。
   - 結果の形式が正しいにもかかわらず、関連付けられたカスタム属性すべてが結果に送信されない場合、ステータスはエラーと表示されます。
   - スクリプト変数をスクリプトとともに送信すると、[スクリプト実行結果処理中] ログにスクリプト変数の詳細（plist）が記録されます。



関連トピック：
